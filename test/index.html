<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAM3 智能标注工具</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>🎯 SAM3 智能标注工具</h1>
    <div class="main-container">
        <div class="controls">
            <h2>1️⃣ 选择模式</h2>
            <div class="prompt-buttons">
                <button id="image-mode-btn" class="mode-btn active">图像标注</button>
                <button id="video-mode-btn" class="mode-btn">视频跟踪</button>
            </div>

            <div id="image-controls">
                <h2>2️⃣ 加载图像</h2>
                <input type="file" id="image-loader" accept="image/*">
                
                <h2>3️⃣ 添加提示词</h2>
                <div class="prompt-buttons">
                    <button id="text-btn" class="prompt-btn">文字提示</button>
                    <button id="box-btn" class="prompt-btn">框选提示</button>
                </div>
                <div id="text-prompt-container" style="display:none;">
                    <input type="text" id="text-prompt" placeholder="输入文字描述...">
                </div>

                <button id="submit-image-btn">🚀 开始标注</button>
            </div>

            <div id="video-controls" style="display:none;">
                <h2>2️⃣ 加载视频</h2>
                <input type="file" id="video-loader" accept="video/*">
                
                <h2>3️⃣ 选择跟踪方式</h2>
                <div class="prompt-buttons">
                    <button id="use-text-prompt-btn" class="video-track-btn active">使用文字描述</button>
                    <button id="use-box-prompt-btn" class="video-track-btn">使用框选</button>
                </div>

                <div id="video-text-prompt-container">
                    <h3>输入要跟踪的对象描述</h3>
                    <input type="text" id="video-text-prompt" placeholder="例如：person, car, dog ...">
                    <p>💡 提示：描述要在视频中检测和追踪的对象（如"人"、"狗"、"汽车"等）</p>
                </div>

                <div id="video-box-prompt-container" style="display:none;">
                    <h3>在第一帧添加框选提示</h3>
                    <p>在下方画布上点击并拖拽鼠标为要跟踪的对象绘制边界框。</p>
                </div>

                <button id="track-video-btn">🎬 开始处理</button>
            </div>

            <h2>4️⃣ 操作</h2>
            <button id="clear-btn">🗑️ 清除所有</button>
            <button id="save-btn">💾 保存当前帧</button>

            <div class="server-info">
                <label for="server-ip">服务器地址：</label>
                <input type="text" id="server-ip" value="112.51.6.147">
                <label for="server-port">端口：</label>
                <input type="text" id="server-port" value="8069">
            </div>
        </div>
        <div class="canvas-container">
            <canvas id="canvas"></canvas>
            <div id="video-player-container" style="display:none;">
                <video id="video-player" controls></video>
            </div>
            <div id="video-results-container" style="display:none;">
                <h3>📹 视频处理结果</h3>
                <label for="frame-slider">选择帧数：</label>
                <input type="range" id="frame-slider" min="0" value="0">
                <span id="frame-label">0</span> / <span id="frame-total">0</span>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>